# PRISM Optimized Aggressive Configuration
# Tuned for maximum color reduction with full GPU acceleration
# Based on recommendations from GPU acceleration analysis
# Target: Break through 112 colors barrier on DSJC1000.5

profile = "wr_optimized_aggressive"
version = "1.1.0"
target_chromatic = 83
deterministic = true  # For reproducible tuning comparisons
seed = 42
max_runtime_hours = 48.0
use_tda = true

[cpu]
threads = 24
pin_pool = false
work_steal = true
parallel_io = true

[gpu]
device_id = 0
streams = 3  # Increased from 1 for TE/AI/Thermo overlap
batch_size = 1024
enable_reservoir_gpu = true
enable_te_gpu = true
enable_statmech_gpu = true
enable_quantum_gpu = true
enable_pimc_gpu = false  # Not implemented, disable
enable_thermo_gpu = true
enable_tda_gpu = true
enable_active_inference_gpu = true  # NEW: Active Inference GPU enabled

[gpu_coloring]
prefer_sparse = false
sparse_density_threshold = 0.40
mask_width = 128

[orchestrator]
use_reservoir_prediction = true
use_active_inference = true
use_transfer_entropy = true
use_geodesic_features = true
use_thermodynamic_equilibration = true
use_pimc = false  # Not implemented, disable
use_quantum_classical_hybrid = true
use_gnn_screening = false  # Not implemented, disable
use_adp_learning = true
use_multiscale_analysis = false  # Not implemented
use_ensemble_consensus = true
restarts = 0  # For iterative mode (multi-pass optimization)
seed = 42
early_stop_no_improve_iters = 5
checkpoint_minutes = 15
adp_dsatur_depth = 50000
adp_quantum_iterations = 45  # Increased from 30
adp_thermo_num_temps = 56  # Match thermo.num_temps (don't let ADP undo it)
dsatur_target_offset = 2  # Reduced from 3 (more aggressive target)
adp_min_history_for_thermo = 3
adp_min_history_for_quantum = 2
adp_min_history_for_loopback = 5

[neuromorphic]
enabled = true
reservoir_size = 1000
spectral_radius = 0.9
leak_rate = 0.3
input_scaling = 0.5
phase_threshold = 0.5

[dsatur]
geodesic_weight = 0.20  # Reduced from 0.30
reservoir_weight = 0.25  # Reduced from 0.30
ai_weight = 0.55  # Increased from 0.40 (lean on Active Inference)
tie_break = "quantum_then_thermo"

[quantum]
iterations = 45  # Increased from 30 for deeper search
target_chromatic = 83
depth = 7
attempts = 384
beta = 0.95  # Increased from 0.9
temperature = 0.7  # Reduced from 1.0 (less random)
failure_retries = 2
fallback_on_failure = true

# NEW: QUBO SA parameters (for GPU quantum annealing)
qubo_iterations = 10000
qubo_batch_size = 256
qubo_t_initial = 1.0
qubo_t_final = 0.01

[memetic]
population_size = 320  # Increased from 256
elite_size = 10  # Scaled with population
generations = 1200  # Increased from 900
crossover_rate = 0.7
mutation_rate = 0.09  # Increased from 0.05 for more exploration
tournament_size = 3
local_search_depth = 20000  # Increased from 10000 for intensive polishing
use_tsp_guidance = true  # Enabled
tsp_weight = 0.25  # Increased from 0.0

[thermo]
replicas = 56  # Maximum VRAM-safe (increased from 48)
num_temps = 56  # Maximum VRAM-safe (increased from 48)
swaps_per_temp = 100  # Not wired, ignored
temperature_max = 15.0  # Increased from 10.0 for more exploration
temperature_min = 0.0005  # Decreased from 0.001 for final refinement
damping = 0.02  # Not wired, ignored
schedule = "geometric"  # Always geometric
steps_per_temp = 8000  # Increased from 5000 for thorough equilibration
replicas_max_safe = 56
num_temps_max_safe = 56

[pimc]
replicas = 48
beads = 48
steps = 20000
tau = 0.01
lambda = 1.0

[adp]
epsilon = 1.0  # Start with full exploration
epsilon_decay = 0.995
epsilon_min = 0.03
alpha = 0.1  # Learning rate
gamma = 0.95  # Discount factor
replay_buffer_size = 1000

[transfer_entropy]
geodesic_weight = 0.35  # Increased from 0.20 for stronger geodesic influence
te_vs_kuramoto_weight = 0.85  # Increased from 0.70 (push TE harder)

[geodesic]
num_landmarks = 16
metric = "hop"
centrality_weight = 0.5
eccentricity_weight = 0.5

# NEW: Iterative multi-pass optimization
[iterative]
enabled = true  # Enable multi-pass refinement
max_passes = 3  # Run pipeline 3 times with best solution as starting point
min_delta = 1  # Continue if improved by â‰¥1 color per pass
